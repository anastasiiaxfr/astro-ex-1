<button id="theme-toggle" class="btn p-2">
    <svg id="theme-icon" width="24" height="24">
        <use xlink:href="#icon-day"></use>
    </svg>
</button>

<script type="module" defer>
    function toggleTheme() {
        const body = document.body
        const currentTheme = body.getAttribute('data-bs-theme') || 'dark'
        const newTheme = currentTheme === 'light' ? 'dark' : 'light'

        body.setAttribute('data-bs-theme', newTheme)
        localStorage.setItem('theme', newTheme)
        updateIcon(newTheme)
    }

    function updateIcon(theme) {
        const icon = document.getElementById('theme-icon')
        const iconUse = icon.querySelector('use')
        iconUse.setAttribute('xlink:href', theme === 'dark' ? '#icon-night' : '#icon-day')
    }

    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme') || 'dark'
        document.body.setAttribute('data-bs-theme', savedTheme)
        updateIcon(savedTheme)

        document.getElementById('theme-toggle').addEventListener('click', toggleTheme)
    })
</script>
